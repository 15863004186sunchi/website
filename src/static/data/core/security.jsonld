{"@context":"http://schema.org","@type":"CreativeWork","name":"Security","text":"\u003ch1\u003eSecurity\u003c/h1\u003e\n\n\u003cp\u003eTo completely disable some operations from your application, refer to the \u003ca href=\"operations.jsonld#enabling-and-disabling-operations\"\u003edisabling operations\u003c/a\u003e\nsection.\u003c/p\u003e\n\n\u003cp\u003eUsing API Platform, you can leverage all security features provided by the \u003ca href=\"http://symfony.com/doc/current/book/security.html\"\u003eSymfony Security component\u003c/a\u003e.\nFor instance, if you wish to restrict the access of some endpoints, you can use \u003ca href=\"http://symfony.com/doc/current/book/security.html#securing-url-patterns-access-control\"\u003eaccess controls directives\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eSince 2.1, you can add security through \u003ca href=\"https://symfony.com/doc/current/expressions.html#security-complex-access-controls-with-expressions\"\u003eSymfony’s access control expressions\u003c/a\u003e in your entities.\u003c/p\u003e\n\n\u003cp\u003eHere is an example:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode class=\"language-php\"\u003euse ApiPlatform\\Core\\Annotation\\ApiResource;\nuse Doctrine\\ORM\\Mapping as ORM;\nuse Symfony\\Component\\Validator\\Constraints as Assert;\n\n/**\n * Secured resource.\n *\n * @ApiResource(\n *     attributes={\u0026#34;access_control\u0026#34;=\u0026#34;is_granted(\u0026#39;ROLE_USER\u0026#39;)\u0026#34;},\n *     collectionOperations={\n *         \u0026#34;get\u0026#34;={\u0026#34;method\u0026#34;=\u0026#34;GET\u0026#34;},\n *         \u0026#34;post\u0026#34;={\u0026#34;method\u0026#34;=\u0026#34;POST\u0026#34;, \u0026#34;access_control\u0026#34;=\u0026#34;is_granted(\u0026#39;ROLE_ADMIN\u0026#39;)\u0026#34;}\n *     },\n *     itemOperations={\n *         \u0026#34;get\u0026#34;={\u0026#34;method\u0026#34;=\u0026#34;GET\u0026#34;, \u0026#34;access_control\u0026#34;=\u0026#34;is_granted(\u0026#39;ROLE_USER\u0026#39;) and object.owner == user\u0026#34;}\n *     }\n * )\n * @ORM\\Entity\n */\nclass Book\n{\n    /**\n     * @var int\n     *\n     * @ORM\\Column(type=\u0026#34;integer\u0026#34;)\n     * @ORM\\Id\n     * @ORM\\GeneratedValue(strategy=\u0026#34;AUTO\u0026#34;)\n     */\n    public $id;\n    \n    /**\n     * @var string The title\n     *\n     * @ORM\\Column\n     * @Assert\\NotBlank\n     */\n    public $title;\n    \n    /**\n     * @ORM\\Column\n     */\n    public $owner;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003eThis example is going to allow only fetching the book related to the current user. if he tries to fetch a book which is\nlinked to his account, that will not return the resource. In addition, only admins are able to create books which means\nthat a user could not create a book.\u003c/p\u003e\n\n\u003cp\u003eIt is also possible to use the \u003ca href=\"events.jsonld\"\u003eevent system\u003c/a\u003e for more advanced logic or even \u003ca href=\"operations.jsonld#creating-custom-operations-and-controllers\"\u003ecustom actions\u003c/a\u003e\nif you really need to.\u003c/p\u003e\n\n\u003cp\u003ePrevious chapter: \u003ca href=\"extensions.jsonld\"\u003eExtensions\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eNext chapter: \u003ca href=\"performance.jsonld\"\u003ePerformance\u003c/a\u003e\u003c/p\u003e\n","author":[{"@type":"Person","name":"hamza","email":"hamza@oblady.fr"},{"@type":"Person","name":"Kévin Dunglas","email":"dunglas@gmail.com"},{"@type":"Person","name":"Kévin Dunglas","email":"dunglas@gmail.com"},{"@type":"Person","name":"Gildas NOEL","email":"g.noel@ackwa.fr"},{"@type":"Person","name":"Kevin Saliou","email":"kevin@saliou.name"},{"@type":"Person","name":"Kevin Saliou","email":"kevin@saliou.name"},{"@type":"Person","name":"Prou Yann","email":"yann@les-tilleuls.coop"},{"@type":"Person","name":"Grégoire Hébert","email":"gregoire@les-tilleuls.coop"},{"@type":"Person","name":"Amrouche Hamza","email":"laharl.moon@gmail.com"},{"@type":"Person","name":"meyerbaptiste","email":"baptiste@les-tilleuls.coop"},{"@type":"Person","name":"Rémi Piotaix","email":"remi.piotaix@gmail.com"},{"@type":"Person","name":"Tanguy Vaessen","email":"seza443@users.noreply.github.com"}],"dateCreated":"2016-03-30T22:29:36+02:00","dateModified":"2017-09-19T10:35:11+02:00"}